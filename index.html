<!doctype html>
<html lang="pl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generator Wyzwa≈Ñ TikTok</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ff0050 0%, #ff4081 50%, #ff6ec7 100%);
            min-height: 100%;
            color: #333;
        }

        html {
            height: 100%;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .language-switcher {
            position: absolute;
            top: 0;
            right: 0;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            color: #333;
            border: 2px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #ff0050 0%, #ff6ec7 100%);
            color: white;
            border-color: #ff0050;
        }

        .lang-btn:hover {
            transform: translateY(-2px);
        }

        .title {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff0050, #ff6ec7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 20px;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            border: 3px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .category-card.active {
            border-color: #ff0050;
            transform: scale(1.05);
        }

        .category-card.risk {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }

        .category-card.progress {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        }

        .category-card.happiness {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
            width: 80px;
            height: 80px;
            margin: 0 auto 15px auto;
        }

        .llama-svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .category-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .category-desc {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .challenge-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .challenge-title {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .challenge-text {
            font-size: 2rem;
            font-weight: bold;
            line-height: 1.3;
            margin-bottom: 20px;
        }

        .challenge-category {
            font-size: 1rem;
            opacity: 0.8;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #ff0050 0%, #ff6ec7 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 0, 80, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 0, 80, 0.4);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn.secondary:hover {
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(252, 182, 159, 0.3);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .custom-challenge-form {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            box-shadow: 0 10px 25px rgba(168, 237, 234, 0.3);
        }

        .form-container h3 {
            text-align: center;
            margin-bottom: 25px;
            color: #333;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }

        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .tips {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 20px;
            margin-top: 30px;
        }

        .tips-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .tip {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .challenge-text {
                font-size: 1.5rem;
            }
            
            .categories {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .stats {
                gap: 15px;
            }

            .language-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <header class="header">
    <div class="language-switcher"><button class="lang-btn active" onclick="switchLanguage('pl')" id="langPL">üáµüá± PL</button> <button class="lang-btn" onclick="switchLanguage('en')" id="langEN">üá∫üá∏ EN</button>
    </div>
    <h1 class="title" id="mainTitle">ü¶ô Lama Drama Challenge</h1>
    <p class="subtitle" id="mainSubtitle">Wylosuj wyzwanie lub wybierz "Lama Drama" je≈õli nie chcesz!</p>
   </header>
   <div class="categories">
    <div class="category-card risk" data-category="risk">
     <div class="category-icon">
      <svg class="llama-svg" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><!-- ODWA≈ªNA LAMA - zdeterminowana mina --> <ellipse cx="50" cy="65" rx="23" ry="18" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="42" rx="7" ry="13" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="28" rx="13" ry="11" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <!-- Odwa≈ºne uszy (wyprostowane) --> <ellipse cx="40" cy="20" rx="4" ry="8" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="60" cy="20" rx="4" ry="8" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <!-- Zdeterminowane oczy (szeroko otwarte) --> <ellipse cx="45" cy="25" rx="4" ry="3" fill="#FFF" stroke="#000" stroke-width="1" /> <ellipse cx="55" cy="25" rx="4" ry="3" fill="#FFF" stroke="#000" stroke-width="1" /> <circle cx="45" cy="25" r="2.5" fill="#000" /> <circle cx="55" cy="25" r="2.5" fill="#000" /> <circle cx="45.8" cy="24.2" r="1" fill="#FFF" /> <circle cx="55.8" cy="24.2" r="1" fill="#FFF" /> <!-- Podniesione brwi (odwaga) --> <path d="M 39 20 Q 43 17 47 20" stroke="#8B4513" stroke-width="3" fill="none" /> <path d="M 53 20 Q 57 17 61 20" stroke="#8B4513" stroke-width="3" fill="none" /> <!-- Zdeterminowany u≈õmiech --> <path d="M 46 31 Q 50 33 54 31" stroke="#8B4513" stroke-width="2" fill="none" /> <ellipse cx="49" cy="29" rx="1" ry="0.5" fill="#8B4513" /> <ellipse cx="51" cy="29" rx="1" ry="0.5" fill="#8B4513" /> <!-- Nogi --> <rect x="41" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="47" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="53" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="59" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <!-- Dzika we≈Çna (ryzyko) --> <circle cx="30" cy="55" r="6" fill="#FF6B6B" opacity="0.8" /> <circle cx="70" cy="55" r="6" fill="#FF6B6B" opacity="0.8" /> <circle cx="38" cy="45" r="4" fill="#FF6B6B" opacity="0.8" /> <circle cx="62" cy="45" r="4" fill="#FF6B6B" opacity="0.8" /> <circle cx="50" cy="50" r="3" fill="#FF6B6B" opacity="0.8" /> <!-- B≈Çyskawice odwagi --> <path d="M 22 35 L 28 40 L 24 45 L 30 50" stroke="#FFD700" stroke-width="2" fill="none" /> <path d="M 78 35 L 72 40 L 76 45 L 70 50" stroke="#FFD700" stroke-width="2" fill="none" />
      </svg>
     </div>
     <div class="category-name" data-text="risk-name">
      Ryzyko
     </div>
     <div class="category-desc" data-text="risk-desc">
      Odwa≈ºne wyzwania poza strefƒÖ komfortu
     </div>
    </div>
    <div class="category-card progress" data-category="progress">
     <div class="category-icon">
      <svg class="llama-svg" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><!-- MƒÑDRA LAMA - zamy≈õlona mina --> <ellipse cx="50" cy="65" rx="23" ry="18" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="42" rx="7" ry="13" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="28" rx="13" ry="11" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <!-- MƒÖdre uszy (lekko skierowane do przodu) --> <ellipse cx="42" cy="21" rx="3.5" ry="7" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" transform="rotate(-5 42 21)" /> <ellipse cx="58" cy="21" rx="3.5" ry="7" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" transform="rotate(5 58 21)" /> <!-- MƒÖdre oczy (p√≥≈Çprzymkniƒôte, zamy≈õlone) --> <ellipse cx="45" cy="25" rx="3" ry="2" fill="#FFF" stroke="#000" stroke-width="1" /> <ellipse cx="55" cy="25" rx="3" ry="2" fill="#FFF" stroke="#000" stroke-width="1" /> <circle cx="45" cy="25" r="1.8" fill="#000" /> <circle cx="55" cy="25" r="1.8" fill="#000" /> <circle cx="45.5" cy="24.5" r="0.7" fill="#FFF" /> <circle cx="55.5" cy="24.5" r="0.7" fill="#FFF" /> <!-- MƒÖdre brwi (lekko zmarszczone) --> <path d="M 41 22 Q 45 20 49 22" stroke="#8B4513" stroke-width="2" fill="none" /> <path d="M 51 22 Q 55 20 59 22" stroke="#8B4513" stroke-width="2" fill="none" /> <!-- Subtelny, mƒÖdry u≈õmiech --> <path d="M 47 30 Q 50 32 53 30" stroke="#8B4513" stroke-width="2" fill="none" /> <ellipse cx="49.5" cy="29" rx="0.8" ry="0.4" fill="#8B4513" /> <ellipse cx="50.5" cy="29" rx="0.8" ry="0.4" fill="#8B4513" /> <!-- Nogi --> <rect x="41" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="47" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="53" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="59" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <!-- UporzƒÖdkowana we≈Çna (postƒôp) --> <circle cx="35" cy="58" r="4" fill="#98FB98" opacity="0.8" /> <circle cx="65" cy="58" r="4" fill="#98FB98" opacity="0.8" /> <circle cx="42" cy="50" r="3" fill="#98FB98" opacity="0.8" /> <circle cx="58" cy="50" r="3" fill="#98FB98" opacity="0.8" /> <circle cx="50" cy="52" r="2.5" fill="#98FB98" opacity="0.8" /> <!-- Strza≈Çka postƒôpu --> <path d="M 20 15 L 30 15 L 28 12 M 30 15 L 28 18" stroke="#4CAF50" stroke-width="3" fill="none" /> <!-- Gwiazdki mƒÖdro≈õci --> <path d="M 75 25 L 76 27 L 78 27 L 76.5 28.5 L 77 30.5 L 75 29.5 L 73 30.5 L 73.5 28.5 L 72 27 L 74 27 Z" fill="#FFD700" opacity="0.8" /> <path d="M 25 30 L 26 32 L 28 32 L 26.5 33.5 L 27 35.5 L 25 34.5 L 23 35.5 L 23.5 33.5 L 22 32 L 24 32 Z" fill="#FFD700" opacity="0.8" />
      </svg>
     </div>
     <div class="category-name" data-text="progress-name">
      Krok Naprz√≥d
     </div>
     <div class="category-desc" data-text="progress-desc">
      Wyzwania rozwojowe i motywacyjne
     </div>
    </div>
    <div class="category-card happiness" data-category="happiness">
     <div class="category-icon">
      <svg class="llama-svg" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><!-- SZCZƒò≈öLIWA LAMA - radosna mina --> <ellipse cx="50" cy="65" rx="23" ry="18" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="42" rx="7" ry="13" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <ellipse cx="50" cy="28" rx="13" ry="11" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" /> <!-- Radosne uszy --> <ellipse cx="40" cy="22" rx="4" ry="7" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" transform="rotate(-10 40 22)" /> <ellipse cx="60" cy="22" rx="4" ry="7" fill="#FFDAB9" stroke="#8B4513" stroke-width="2" transform="rotate(10 60 22)" /> <!-- Szczƒô≈õliwe oczy (zamkniƒôte w u≈õmiechu) --> <path d="M 41 25 Q 45 23 49 25" stroke="#000" stroke-width="2" fill="none" /> <path d="M 51 25 Q 55 23 59 25" stroke="#000" stroke-width="2" fill="none" /> <!-- Radosne brwi --> <path d="M 41 21 Q 45 19 49 21" stroke="#8B4513" stroke-width="2" fill="none" /> <path d="M 51 21 Q 55 19 59 21" stroke="#8B4513" stroke-width="2" fill="none" /> <!-- Wielki u≈õmiech --> <path d="M 44 31 Q 50 36 56 31" stroke="#8B4513" stroke-width="3" fill="none" /> <ellipse cx="49" cy="29" rx="1" ry="0.5" fill="#8B4513" /> <ellipse cx="51" cy="29" rx="1" ry="0.5" fill="#8B4513" /> <!-- Nogi --> <rect x="41" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="47" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="53" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <rect x="59" y="78" width="4" height="14" fill="#8B4513" rx="2" /> <!-- Radosna we≈Çna --> <circle cx="32" cy="58" r="5" fill="#FFB6C1" opacity="0.8" /> <circle cx="68" cy="58" r="5" fill="#FFB6C1" opacity="0.8" /> <circle cx="38" cy="48" r="3" fill="#FFB6C1" opacity="0.8" /> <circle cx="62" cy="48" r="3" fill="#FFB6C1" opacity="0.8" /> <circle cx="50" cy="52" r="2" fill="#FFB6C1" opacity="0.8" /> <!-- Serduszka szczƒô≈õcia --> <path d="M 25 40 Q 23 38 25 36 Q 27 38 25 40" fill="#FF69B4" opacity="0.7" /> <path d="M 75 40 Q 73 38 75 36 Q 77 38 75 40" fill="#FF69B4" opacity="0.7" />
      </svg>
     </div>
     <div class="category-name" data-text="happiness-name">
      Szczƒô≈õcie
     </div>
     <div class="category-desc" data-text="happiness-desc">
      Pozytywne wyzwania dla dobrego nastroju
     </div>
    </div>
   </div>
   <div class="challenge-display" id="challengeDisplay">
    <div class="challenge-title">
     Kliknij przycisk poni≈ºej, aby wylosowaƒá wyzwanie!
    </div>
    <div class="challenge-text">
     üéØ Gotowy na nowe wyzwanie?
    </div>
    <div class="challenge-category">
     Wybierz kategoriƒô lub losuj ze wszystkich
    </div>
   </div>
   <div class="controls"><button class="btn" onclick="generateChallenge()">üé≤ Losuj Wyzwanie</button> <button class="btn secondary" onclick="generateFromCategory()">üéØ Losuj z Kategorii</button> <button class="btn secondary" onclick="saveChallenge()">üíæ Zapisz Wyzwanie</button> <button class="btn secondary" onclick="toggleCustomChallenge()">‚úèÔ∏è W≈Çasne Wyzwanie</button> <button class="btn" onclick="llamaDrama()" style="background: linear-gradient(135deg, #fab1a0 0%, #ffeaa7 100%);">ü¶ô Lama Drama!</button>
   </div>
   <div class="custom-challenge-form" id="customChallengeForm" style="display: none;">
    <div class="form-container">
     <h3>‚úèÔ∏è Stw√≥rz W≈Çasne Wyzwanie</h3>
     <div class="form-group"><label for="customChallengeText">Tre≈õƒá wyzwania:</label> <textarea id="customChallengeText" placeholder="Wpisz swoje wyzwanie..." rows="3"></textarea>
     </div>
     <div class="form-group"><label for="customChallengeCategory">Kategoria:</label> <select id="customChallengeCategory"> <option value="risk">ü¶ô Ryzyko</option> <option value="progress">ü¶ô Krok Naprz√≥d</option> <option value="happiness">ü¶ô Szczƒô≈õcie</option> </select>
     </div>
     <div class="form-buttons"><button class="btn" onclick="createCustomChallenge()">üéØ Stw√≥rz Wyzwanie</button> <button class="btn secondary" onclick="createBlankCard()">üì± Pusta Karta - Dodaj sw√≥j tekst w monta≈ºu</button> <button class="btn secondary" onclick="toggleCustomChallenge()">‚ùå Anuluj</button>
     </div>
    </div>
   </div>
   <div class="stats">
    <div class="stat">
     <div class="stat-number" id="totalChallenges">
      0
     </div>
     <div class="stat-label">
      Wylosowane
     </div>
    </div>
    <div class="stat">
     <div class="stat-number" id="savedChallenges">
      0
     </div>
     <div class="stat-label">
      Zapisane
     </div>
    </div>
    <div class="stat">
     <div class="stat-number" id="favoriteCategory">
      -
     </div>
     <div class="stat-label">
      Ulubiona kategoria
     </div>
    </div>
   </div>
   <div class="tips">
    <div class="tips-title">
     üí° Wskaz√≥wki dla TikToka
    </div>
    <div class="tip">
     üì± <strong>Nagrywanie ekranu:</strong> U≈ºyj funkcji nagrywania ekranu telefonu, aby nagraƒá wylosowane wyzwanie, potem zmontuj z tym sw√≥j filmik!
    </div>
    <div class="tip">
     üé¨ <strong>Monta≈º:</strong> Nagraj ekran z wyzwaniem, potem dodaj swoje wykonanie - to ≈õwietny spos√≥b na intro do filmiku
    </div>
    <div class="tip">
     üìù <strong>Pusta karta:</strong> U≈ºyj opcji "Pusta Karta" aby w monta≈ºu dodaƒá w≈Çasny tekst z wyzwaniem
    </div>
    <div class="tip">
     üõ°Ô∏è <strong>W≈Çasne wyzwania:</strong> Twoje wyzwania sƒÖ sprawdzane pod kƒÖtem d≈Çugo≈õci i duplikat√≥w. SƒÖ dostƒôpne tylko w tej sesji - po od≈õwie≈ºeniu strony znikajƒÖ
    </div>
    <div class="tip">
     üéµ <strong>Muzyka:</strong> U≈ºywaj popularnych d≈∫wiƒôk√≥w i trend√≥w muzycznych
    </div>
    <div class="tip">
     ‚è∞ <strong>Timing:</strong> Pierwsze 3 sekundy sƒÖ kluczowe - od razu przyciƒÖgnij uwagƒô
    </div>
    <div class="tip">
     üè∑Ô∏è <strong>Hashtagi:</strong> U≈ºywaj 3-5 relevantnych hashtag√≥w, w tym trendujƒÖcych
    </div>
    <div class="tip">
     üïê <strong>Pora publikacji:</strong> Publikuj miƒôdzy 18:00-22:00 dla lepszego zasiƒôgu
    </div>
   </div>
  </div>
  <script>
        let currentLanguage = 'pl';

        const translations = {
            pl: {
                title: "ü¶ô Lama Drama Challenge",
                subtitle: "Wylosuj wyzwanie lub wybierz \"Lama Drama\" je≈õli nie chcesz!",
                "risk-name": "Ryzyko", 
                "risk-desc": "Odwa≈ºne wyzwania poza strefƒÖ komfortu",
                "progress-name": "Krok Naprz√≥d",
                "progress-desc": "Wyzwania rozwojowe i motywacyjne",
                "happiness-name": "Szczƒô≈õcie",
                "happiness-desc": "Pozytywne wyzwania dla dobrego nastroju",
                "challenge-title": "Twoje nowe wyzwanie:",
                "initial-text": "üéØ Gotowy na nowe wyzwanie?",
                "initial-category": "Wybierz kategoriƒô lub losuj ze wszystkich",
                "btn-random": "üé≤ Losuj Wyzwanie",
                "btn-category": "üéØ Losuj z Kategorii", 
                "btn-custom": "‚úèÔ∏è W≈Çasne Wyzwanie",
                "btn-save": "üíæ Zapisz Wyzwanie",
                "btn-drama": "ü¶ô Lama Drama!",
                "custom-title": "‚úèÔ∏è Stw√≥rz W≈Çasne Wyzwanie",
                "custom-text-label": "Tre≈õƒá wyzwania:",
                "custom-text-placeholder": "Wpisz swoje wyzwanie...",
                "custom-category-label": "Kategoria:",
                "btn-create": "üéØ Stw√≥rz Wyzwanie",
                "btn-blank": "üì± Pusta Karta - Dodaj sw√≥j tekst w monta≈ºu",
                "btn-cancel": "‚ùå Anuluj",
                "stat-generated": "Wylosowane",
                "stat-saved": "Zapisane",
                "stat-favorite": "Ulubiona kategoria",
                "tips-title": "üí° Wskaz√≥wki dla TikToka"
            },
            en: {
                title: "ü¶ô Llama Drama Challenge",
                subtitle: "Draw a challenge or choose \"Llama Drama\" if you don't want to!",
                "risk-name": "Risk",
                "risk-desc": "Bold challenges outside comfort zone", 
                "progress-name": "Step Forward",
                "progress-desc": "Development and motivational challenges",
                "happiness-name": "Happiness",
                "happiness-desc": "Positive challenges for good mood",
                "challenge-title": "Your new challenge:",
                "initial-text": "üéØ Ready for a new challenge?",
                "initial-category": "Choose a category or draw from all",
                "btn-random": "üé≤ Random Challenge",
                "btn-category": "üéØ Draw from Category",
                "btn-custom": "‚úèÔ∏è Custom Challenge", 
                "btn-save": "üíæ Save Challenge",
                "btn-drama": "ü¶ô Llama Drama!",
                "custom-title": "‚úèÔ∏è Create Custom Challenge",
                "custom-text-label": "Challenge text:",
                "custom-text-placeholder": "Enter your challenge...",
                "custom-category-label": "Category:",
                "btn-create": "üéØ Create Challenge",
                "btn-blank": "üì± Blank Card - Add your text in editing",
                "btn-cancel": "‚ùå Cancel",
                "stat-generated": "Generated",
                "stat-saved": "Saved", 
                "stat-favorite": "Favorite category",
                "tips-title": "üí° TikTok Tips"
            }
        };

        const challenges = {
            pl: {
                risk: [
                    "Spƒôd≈∫ ca≈ÇƒÖ sobotƒô bez plan√≥w - id≈∫ gdzie nogi poniosƒÖ i r√≥b co serce podpowie (Ryzyko: Straconego Czasu)",
                    "Przez miesiƒÖc nie narzekaj na nic - znajd≈∫ pozytyw w ka≈ºdej sytuacji (Ryzyko: T≈Çumienia Emocji)",
                    "Powiedz komu≈õ wa≈ºnemu swojƒÖ najwiƒôkszƒÖ tajemnicƒô lub wstyd (Ryzyko: Odrzucenia)",
                    "Przez tydzie≈Ñ ≈ºyj z bud≈ºetem o 50% mniejszym ni≈º zwykle (Ryzyko: Dyskomfortu)",
                    "Zr√≥b co≈õ, co mo≈ºe siƒô nie udaƒá, ale o czym marzysz od lat (Ryzyko: Spektakularnej Pora≈ºki)",
                    "Przez 48 godzin nie u≈ºywaj ≈ºadnych social medi√≥w ani rozrywki (Ryzyko: Nudy/Refleksji)",
                    "Powiedz 'tak' na pierwszƒÖ propozycjƒô, kt√≥rƒÖ dzi≈õ us≈Çyszysz (Ryzyko: Nieprzewidywalno≈õci)",
                    "Spƒôd≈∫ ca≈Çy dzie≈Ñ robiƒÖc rzeczy, kt√≥rych siƒô boisz (Ryzyko: Przyt≈Çoczenia)",
                    "Przez tydzie≈Ñ ≈õpij tylko 6 godzin i wykorzystaj dodatkowy czas na marzenia (Ryzyko: Zmƒôczenia)",
                    "Zainwestuj czas/pieniƒÖdze w co≈õ, co mo≈ºe siƒô nie zwr√≥ciƒá, ale Ciƒô fascynuje (Ryzyko: Straty)"
                ],
                progress: [
                    "Napisz list do siebie z przysz≈Ço≈õci i wy≈õlij go mailem z op√≥≈∫nieniem na rok (Ryzyko: Rozczarowania)",
                    "Zadzwo≈Ñ do osoby, kt√≥rej co≈õ zawdziƒôczasz i powiedz jej o tym wprost (Ryzyko: Emocjonalno≈õci)",
                    "Przez tydzie≈Ñ wstawaj godzinƒô wcze≈õniej i po≈õwiƒôƒá ten czas tylko na siebie (Ryzyko: Zmƒôczenia)",
                    "Napisz listƒô 10 swoich s≈Çabo≈õci i wybierz jednƒÖ do pracy przez miesiƒÖc (Ryzyko: Samooceny)",
                    "Popro≈õ o pomoc w czym≈õ, z czym zawsze radzisz sobie sam (Ryzyko: S≈Çabo≈õci)",
                    "Przez miesiƒÖc r√≥b jednƒÖ rzecz dziennie, kt√≥ra Ciƒô przera≈ºa (Ryzyko: CiƒÖg≈Çego Dyskomfortu)",
                    "Napisz szczery list do osoby, z kt√≥rƒÖ masz nierozwiƒÖzany konflikt (Ryzyko: Odrzucenia)",
                    "Zacznij naukƒô czego≈õ kompletnie nowego i podziel siƒô postƒôpami online (Ryzyko: Publicznej Pora≈ºki)",
                    "Przez tydzie≈Ñ prowad≈∫ dziennik emocji - zapisuj co czujesz i dlaczego (Ryzyko: Bolesnej Prawdy)",
                    "Um√≥w siƒô na rozmowƒô z kim≈õ, kogo podziwiasz, ale siƒô boisz (Ryzyko: Odrzucenia)"
                ],
                happiness: [
                    "Przez ca≈Çy dzie≈Ñ m√≥w 'dziƒôkujƒô' za ka≈ºdƒÖ ma≈ÇƒÖ rzecz - nawet za otwarte drzwi (Ryzyko: Konwenans√≥w)",
                    "Zata≈Ñcz w publicznym miejscu do muzyki, kt√≥rƒÖ s≈Çyszysz tylko Ty w s≈Çuchawkach (Ryzyko: Oceny Publicznej)",
                    "Powiedz nieznajomej osobie szczery komplement o tym, co w niej zauwa≈ºy≈Çe≈õ (Ryzyko: Niezrƒôczno≈õci)",
                    "Przez godzinƒô odpowiadaj na pytanie 'jak siƒô masz?' szczerze i szczeg√≥≈Çowo (Ryzyko: Intymno≈õci)",
                    "No≈õ dzi≈õ co≈õ, co sprawia, ≈ºe czujesz siƒô piƒôknie, ale 'za bardzo' na tƒô okazjƒô (Ryzyko: Przesady)",
                    "≈ömiej siƒô g≈Ço≈õno przez 30 sekund w miejscu publicznym bez powodu (Ryzyko: Dziwno≈õci)",
                    "Powiedz 'nie' na co≈õ, na co zawsze m√≥wisz 'tak' z grzeczno≈õci (Ryzyko: Konfliktu)",
                    "Przez dzie≈Ñ u≈ºywaj tylko pozytywnych s≈Ç√≥w - nawet opisujƒÖc problemy (Ryzyko: Sztuczno≈õci)",
                    "Zapytaj nieznajomƒÖ osobƒô o jej najwiƒôksze marzenie i wys≈Çuchaj odpowiedzi (Ryzyko: Odrzucenia)",
                    "Zr√≥b co≈õ dziecinnego publicznie - skacz przez ka≈Çu≈ºe, biegaj, r√≥b miny (Ryzyko: Infantylno≈õci)"
                ]
            },
            en: {
                risk: [
                    "Spend the whole Saturday without plans - go where your feet take you (Risk: Wasted Time)",
                    "Don't complain about anything for a month - find positives in every situation (Risk: Suppressed Emotions)",
                    "Tell someone important your biggest secret or shame (Risk: Rejection)",
                    "Live on a budget 50% smaller than usual for a week (Risk: Discomfort)",
                    "Do something that might fail but you've dreamed about for years (Risk: Spectacular Failure)",
                    "Don't use any social media or entertainment for 48 hours (Risk: Boredom/Reflection)",
                    "Say 'yes' to the first proposal you hear today (Risk: Unpredictability)",
                    "Spend the whole day doing things you're afraid of (Risk: Overwhelm)",
                    "Sleep only 6 hours for a week and use extra time for dreams (Risk: Fatigue)",
                    "Invest time/money in something that might not pay off but fascinates you (Risk: Loss)"
                ],
                progress: [
                    "Write a letter to your future self and email it with a one-year delay (Risk: Disappointment)",
                    "Call someone you owe something to and tell them directly (Risk: Emotionality)",
                    "Wake up an hour earlier for a week and dedicate that time only to yourself (Risk: Fatigue)",
                    "Write a list of 10 weaknesses and choose one to work on for a month (Risk: Self-Assessment)",
                    "Ask for help with something you always handle alone (Risk: Showing Weakness)",
                    "Do one thing that scares you every day for a month (Risk: Constant Discomfort)",
                    "Write an honest letter to someone you have an unresolved conflict with (Risk: Rejection)",
                    "Start learning something completely new and share progress online (Risk: Public Failure)",
                    "Keep an emotion journal for a week - write what you feel and why (Risk: Painful Truth)",
                    "Arrange a conversation with someone you admire but are afraid of (Risk: Rejection)"
                ],
                happiness: [
                    "Say 'thank you' for every small thing all day - even for open doors (Risk: Social Conventions)",
                    "Dance in public to music only you can hear through headphones (Risk: Public Judgment)",
                    "Give a sincere compliment to a stranger about something you noticed (Risk: Awkwardness)",
                    "For one hour, answer 'how are you?' honestly and in detail (Risk: Intimacy)",
                    "Wear something that makes you feel beautiful but 'too much' for the occasion (Risk: Overdoing)",
                    "Laugh loudly for 30 seconds in public for no reason (Risk: Looking Weird)",
                    "Say 'no' to something you always say 'yes' to out of politeness (Risk: Conflict)",
                    "Use only positive words all day - even when describing problems (Risk: Artificiality)",
                    "Ask a stranger about their biggest dream and listen to the answer (Risk: Rejection)",
                    "Do something childish in public - jump in puddles, run around, make faces (Risk: Immaturity)"
                ]
            }
        };

        let gameStats = {
            totalChallenges: 0,
            savedChallenges: 0,
            categoryStats: { risk: 0, progress: 0, happiness: 0 },
            currentChallenge: null,
            selectedCategory: null,
            llamaDramas: 0
        };

        let savedChallengesList = [];

        // Default configuration for Element SDK
        const defaultConfig = {
            app_title: "ü¶ô Lama Drama Challenge",
            app_subtitle: "Wylosuj wyzwanie lub wybierz \"Lama Drama\" je≈õli nie chcesz!",
            background_color: "#ff0050",
            surface_color: "#ffffff",
            text_color: "#333333",
            primary_action_color: "#ff0050",
            secondary_action_color: "#667eea",
            font_family: "Segoe UI",
            font_size: 16
        };

        // Funkcje d≈∫wiƒôkowe
        function playClickSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function playGenerateSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.2);
            oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.4);
            
            gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.4);
        }

        function playLlamaDramaSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(300, audioContext.currentTime + 0.3);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.6);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.6);
        }

        function selectCategory(category) {
            playClickSound();
            
            // Usu≈Ñ poprzednie zaznaczenie
            document.querySelectorAll('.category-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Zaznacz nowƒÖ kategoriƒô
            if (category) {
                document.querySelector(`[data-category="${category}"]`).classList.add('active');
                gameStats.selectedCategory = category;
            } else {
                gameStats.selectedCategory = null;
            }
        }

        function generateChallenge() {
            playGenerateSound();
            
            const currentChallenges = challenges[currentLanguage];
            
            // Po≈ÇƒÖcz podstawowe wyzwania z w≈Çasnymi (je≈õli istniejƒÖ)
            const allChallenges = [
                ...currentChallenges.risk, 
                ...currentChallenges.progress, 
                ...currentChallenges.happiness,
                ...(currentChallenges.risk_custom || []),
                ...(currentChallenges.progress_custom || []),
                ...(currentChallenges.happiness_custom || [])
            ];
            const randomChallenge = allChallenges[Math.floor(Math.random() * allChallenges.length)];
            
            // Okre≈õl kategoriƒô wyzwania
            let category = 'mixed';
            if (currentChallenges.risk.includes(randomChallenge) || (currentChallenges.risk_custom && currentChallenges.risk_custom.includes(randomChallenge))) category = 'risk';
            else if (currentChallenges.progress.includes(randomChallenge) || (currentChallenges.progress_custom && currentChallenges.progress_custom.includes(randomChallenge))) category = 'progress';
            else if (currentChallenges.happiness.includes(randomChallenge) || (currentChallenges.happiness_custom && currentChallenges.happiness_custom.includes(randomChallenge))) category = 'happiness';
            
            displayChallenge(randomChallenge, category);
            updateStats(category);
        }

        function generateFromCategory() {
            playGenerateSound();
            
            if (!gameStats.selectedCategory) {
                // Je≈õli nie wybrano kategorii, poka≈º komunikat
                const message = currentLanguage === 'pl' ? "Najpierw wybierz kategoriƒô powy≈ºej! üëÜ" : "First choose a category above! üëÜ";
                displayChallenge(message, "info");
                return;
            }
            
            const categoryName = gameStats.selectedCategory;
            const currentChallenges = challenges[currentLanguage];
            
            // Po≈ÇƒÖcz podstawowe wyzwania z w≈Çasnymi dla wybranej kategorii
            const categoryChallenges = [
                ...currentChallenges[categoryName],
                ...(currentChallenges[categoryName + '_custom'] || [])
            ];
            const randomChallenge = categoryChallenges[Math.floor(Math.random() * categoryChallenges.length)];
            
            displayChallenge(randomChallenge, categoryName);
            updateStats(categoryName);
        }

        function displayChallenge(challenge, category) {
            const display = document.getElementById('challengeDisplay');
            const t = translations[currentLanguage];
            
            const categoryNames = {
                risk: `ü¶ô ${t['risk-name']}`,
                progress: `ü¶ô ${t['progress-name']}`,
                happiness: `ü¶ô ${t['happiness-name']}`,
                mixed: currentLanguage === 'pl' ? 'ü¶ô Mix wszystkich kategorii' : 'ü¶ô Mix of all categories',
                info: '‚ÑπÔ∏è ' + (currentLanguage === 'pl' ? 'Informacja' : 'Information'),
                drama: 'ü¶ô Lama Drama'
            };
            
            display.innerHTML = `
                <div class="challenge-title">${t['challenge-title']}</div>
                <div class="challenge-text">${challenge}</div>
                <div class="challenge-category">${categoryNames[category] || category}</div>
            `;
            
            gameStats.currentChallenge = { text: challenge, category: category };
            
            // Animacja
            display.style.transform = 'scale(0.95)';
            setTimeout(() => {
                display.style.transform = 'scale(1)';
            }, 100);
        }

        function updateStats(category) {
            if (category !== 'info') {
                gameStats.totalChallenges++;
                if (category !== 'mixed') {
                    gameStats.categoryStats[category]++;
                }
            }
            
            document.getElementById('totalChallenges').textContent = gameStats.totalChallenges;
            document.getElementById('savedChallenges').textContent = gameStats.savedChallenges;
            
            // Znajd≈∫ ulubionƒÖ kategoriƒô
            const favorite = Object.keys(gameStats.categoryStats).reduce((a, b) => 
                gameStats.categoryStats[a] > gameStats.categoryStats[b] ? a : b
            );
            
            const favoriteNames = {
                risk: 'Ryzyko',
                progress: 'Krok Naprz√≥d',
                happiness: 'Szczƒô≈õcie'
            };
            
            document.getElementById('favoriteCategory').textContent = 
                gameStats.categoryStats[favorite] > 0 ? favoriteNames[favorite] : '-';
        }

        function saveChallenge() {
            playClickSound();
            
            if (!gameStats.currentChallenge) {
                displayChallenge("Najpierw wylosuj wyzwanie! üé≤", "info");
                return;
            }
            
            // Sprawd≈∫ czy wyzwanie ju≈º nie jest zapisane
            const exists = savedChallengesList.some(saved => 
                saved.text === gameStats.currentChallenge.text
            );
            
            if (exists) {
                displayChallenge("To wyzwanie jest ju≈º zapisane! üìù", "info");
                return;
            }
            
            savedChallengesList.push({
                ...gameStats.currentChallenge,
                savedAt: new Date().toLocaleString('pl-PL')
            });
            
            gameStats.savedChallenges++;
            updateStats('info');
            
            displayChallenge("Wyzwanie zosta≈Ço zapisane! ‚úÖ", "info");
            
            // Poka≈º zapisane wyzwania w konsoli (dla developera)
            console.log('Zapisane wyzwania:', savedChallengesList);
        }

        function llamaDrama() {
            playLlamaDramaSound();
            
            const dramaMessages = [
                "ü¶ô Lama Drama! Nie ma problemu, czasem lamy te≈º potrzebujƒÖ przerwy!",
                "ü¶ô Drama llama activated! Mo≈ºe nastƒôpnym razem bƒôdziesz gotowy na wyzwanie!",
                "ü¶ô Lama m√≥wi: 'Nie dzi≈õ!' I to jest w porzƒÖdku!",
                "ü¶ô Drama mode ON! Lamy te≈º majƒÖ swoje dni!",
                "ü¶ô Lama Drama! Czasem najlepszym wyzwaniem jest powiedzenie 'nie'!",
                "ü¶ô Eleganckie wyj≈õcie po lamemu! Szacunek za szczero≈õƒá!",
                "ü¶ô Lama Drama! Mo≈ºe to wyzwanie nie by≈Ço dla Ciebie - i to OK!",
                "ü¶ô Drama llama says: 'Maybe tomorrow!' Lamy te≈º majƒÖ prawo do wyboru!"
            ];
            
            const randomDrama = dramaMessages[Math.floor(Math.random() * dramaMessages.length)];
            displayChallenge(randomDrama, 'drama');
            
            gameStats.llamaDramas++;
            // Dodaj statystykƒô Lama Drama
            updateLlamaDramaStats();
        }

        function updateLlamaDramaStats() {
            // Znajd≈∫ lub stw√≥rz statystykƒô dla Lama Drama
            const statsContainer = document.querySelector('.stats');
            let dramaStatElement = document.getElementById('llamaDramaStat');
            
            if (!dramaStatElement) {
                const newStat = document.createElement('div');
                newStat.className = 'stat';
                newStat.innerHTML = `
                    <div class="stat-number" id="llamaDramaCount">0</div>
                    <div class="stat-label">Lama Dramy</div>
                `;
                newStat.id = 'llamaDramaStat';
                statsContainer.appendChild(newStat);
                dramaStatElement = newStat;
            }
            
            document.getElementById('llamaDramaCount').textContent = gameStats.llamaDramas;
        }

        function toggleCustomChallenge() {
            playClickSound();
            
            const form = document.getElementById('customChallengeForm');
            if (form.style.display === 'none') {
                form.style.display = 'block';
                form.scrollIntoView({ behavior: 'smooth' });
            } else {
                form.style.display = 'none';
                // Wyczy≈õƒá formularz
                document.getElementById('customChallengeText').value = '';
                document.getElementById('customChallengeCategory').value = 'risk';
            }
        }

        function createCustomChallenge() {
            playClickSound();
            
            const text = document.getElementById('customChallengeText').value.trim();
            const category = document.getElementById('customChallengeCategory').value;
            
            if (!text) {
                displayChallenge("Wpisz tre≈õƒá wyzwania! ‚úèÔ∏è", "info");
                return;
            }
            
            // Podstawowa walidacja tre≈õci
            if (text.length < 10) {
                displayChallenge("Wyzwanie jest za kr√≥tkie! Minimum 10 znak√≥w. ‚úèÔ∏è", "info");
                return;
            }
            
            if (text.length > 200) {
                displayChallenge("Wyzwanie jest za d≈Çugie! Maksimum 200 znak√≥w. ‚úèÔ∏è", "info");
                return;
            }
            
            // Sprawd≈∫ czy wyzwanie ju≈º istnieje
            const allChallenges = [...challenges.pl.risk, ...challenges.pl.progress, ...challenges.pl.happiness];
            if (allChallenges.some(challenge => challenge.toLowerCase() === text.toLowerCase())) {
                displayChallenge("To wyzwanie ju≈º istnieje! Spr√≥buj czego≈õ innego. üîÑ", "info");
                return;
            }
            
            displayChallenge(text, category);
            gameStats.currentChallenge = { text: text, category: category, custom: true };
            
            // Dodaj do odpowiedniej kategorii (tylko lokalnie, nie na sta≈Çe)
            if (!challenges[currentLanguage][category + '_custom']) {
                challenges[currentLanguage][category + '_custom'] = [];
            }
            challenges[currentLanguage][category + '_custom'].push(text);
            
            // Ukryj formularz
            toggleCustomChallenge();
            
            // Aktualizuj statystyki
            updateStats(category);
            
            displayChallenge("W≈Çasne wyzwanie utworzone! üéØ (Dostƒôpne tylko w tej sesji)", "info");
        }

        function createBlankCard() {
            playClickSound();
            
            const category = document.getElementById('customChallengeCategory').value;
            
            const categoryNames = {
                risk: 'ü¶ô Ryzyko',
                progress: 'ü¶ô Krok Naprz√≥d',
                happiness: 'ü¶ô Szczƒô≈õcie'
            };
            
            // Stw√≥rz pustƒÖ kartƒô z wiƒôkszym miejscem na tekst
            const display = document.getElementById('challengeDisplay');
            display.innerHTML = `
                <div class="challenge-title">Twoje nowe wyzwanie:</div>
                <div class="challenge-text" style="min-height: 200px; margin: 20px 0;">
                </div>
                <div class="challenge-category">${categoryNames[category]}</div>
            `;
            
            gameStats.currentChallenge = { text: "Pusta karta", category: category, blank: true };
            
            // Animacja
            display.style.transform = 'scale(0.95)';
            setTimeout(() => {
                display.style.transform = 'scale(1)';
            }, 100);
            
            // Ukryj formularz
            toggleCustomChallenge();
        }

        // Event listenery dla kategorii
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', () => {
                const category = card.dataset.category;
                if (gameStats.selectedCategory === category) {
                    selectCategory(null); // Odznacz je≈õli ju≈º zaznaczone
                } else {
                    selectCategory(category);
                }
            });
        });

        // Language switching function
        function switchLanguage(lang) {
            playClickSound();
            currentLanguage = lang;
            
            // Update language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang' + lang.toUpperCase()).classList.add('active');
            
            // Update all text elements
            updateLanguage();
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update main elements
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('mainSubtitle').textContent = t.subtitle;
            
            // Update category names and descriptions
            document.querySelectorAll('[data-text]').forEach(element => {
                const key = element.getAttribute('data-text');
                if (t[key]) {
                    element.textContent = t[key];
                }
            });
            
            // Update buttons
            updateButtonTexts();
            
            // Update stats labels
            updateStatsLabels();
            
            // Update form elements
            updateFormElements();
            
            // Update tips
            updateTips();
            
            // Reset challenge display to initial state
            resetChallengeDisplay();
        }

        function updateButtonTexts() {
            const t = translations[currentLanguage];
            const buttons = document.querySelectorAll('.btn');
            
            buttons[0].innerHTML = t['btn-random'];
            buttons[1].innerHTML = t['btn-category'];
            buttons[2].innerHTML = t['btn-save'];
            buttons[3].innerHTML = t['btn-custom'];
            buttons[4].innerHTML = t['btn-drama'];
        }

        function updateStatsLabels() {
            const t = translations[currentLanguage];
            const statLabels = document.querySelectorAll('.stat-label');
            
            statLabels[0].textContent = t['stat-generated'];
            statLabels[1].textContent = t['stat-saved'];
            statLabels[2].textContent = t['stat-favorite'];
        }

        function updateFormElements() {
            const t = translations[currentLanguage];
            
            // Update form title
            const formTitle = document.querySelector('.form-container h3');
            if (formTitle) formTitle.textContent = t['custom-title'];
            
            // Update form labels and placeholders
            const textLabel = document.querySelector('label[for="customChallengeText"]');
            if (textLabel) textLabel.textContent = t['custom-text-label'];
            
            const textArea = document.getElementById('customChallengeText');
            if (textArea) textArea.placeholder = t['custom-text-placeholder'];
            
            const categoryLabel = document.querySelector('label[for="customChallengeCategory"]');
            if (categoryLabel) categoryLabel.textContent = t['custom-category-label'];
            
            // Update form buttons
            const formButtons = document.querySelectorAll('.form-buttons .btn');
            if (formButtons.length >= 3) {
                formButtons[0].innerHTML = t['btn-create'];
                formButtons[1].innerHTML = t['btn-blank'];
                formButtons[2].innerHTML = t['btn-cancel'];
            }
            
            // Update category options
            const categorySelect = document.getElementById('customChallengeCategory');
            if (categorySelect) {
                categorySelect.innerHTML = `
                    <option value="risk">ü¶ô ${t['risk-name']}</option>
                    <option value="progress">ü¶ô ${t['progress-name']}</option>
                    <option value="happiness">ü¶ô ${t['happiness-name']}</option>
                `;
            }
        }

        function updateTips() {
            const t = translations[currentLanguage];
            const tipsTitle = document.querySelector('.tips-title');
            if (tipsTitle) tipsTitle.textContent = t['tips-title'];
            
            // Tips content remains in Polish/English as they are platform-specific
        }

        function resetChallengeDisplay() {
            const t = translations[currentLanguage];
            const display = document.getElementById('challengeDisplay');
            
            display.innerHTML = `
                <div class="challenge-title">Kliknij przycisk poni≈ºej, aby wylosowaƒá wyzwanie!</div>
                <div class="challenge-text">${t['initial-text']}</div>
                <div class="challenge-category">${t['initial-category']}</div>
            `;
        }

        // Element SDK Configuration
        async function onConfigChange(config) {
            // Update title and subtitle
            const titleElement = document.getElementById('mainTitle');
            const subtitleElement = document.getElementById('mainSubtitle');
            
            if (titleElement) {
                titleElement.textContent = config.app_title || defaultConfig.app_title;
            }
            if (subtitleElement) {
                subtitleElement.textContent = config.app_subtitle || defaultConfig.app_subtitle;
            }

            // Update colors
            const customFont = config.font_family || defaultConfig.font_family;
            const baseSize = config.font_size || defaultConfig.font_size;
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
            const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;

            // Apply background color
            document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${backgroundColor}CC 50%, ${backgroundColor}99 100%)`;
            
            // Apply surface color
            document.querySelector('.container').style.backgroundColor = surfaceColor;
            
            // Apply text color
            document.body.style.color = textColor;
            document.querySelector('.container').style.color = textColor;
            
            // Apply primary action color to main buttons
            const primaryButtons = document.querySelectorAll('.btn:not(.secondary)');
            primaryButtons.forEach(btn => {
                btn.style.background = `linear-gradient(135deg, ${primaryActionColor} 0%, ${primaryActionColor}CC 100%)`;
            });
            
            // Apply secondary action color to secondary buttons
            const secondaryButtons = document.querySelectorAll('.btn.secondary');
            secondaryButtons.forEach(btn => {
                btn.style.background = `linear-gradient(135deg, ${secondaryActionColor} 0%, ${secondaryActionColor}CC 100%)`;
            });

            // Apply font family and size
            const fontStack = `${customFont}, Arial, sans-serif`;
            
            // Main title - 2x base size
            if (titleElement) {
                titleElement.style.fontFamily = fontStack;
                titleElement.style.fontSize = `${baseSize * 2}px`;
            }
            
            // Subtitle - 1.3x base size
            if (subtitleElement) {
                subtitleElement.style.fontFamily = fontStack;
                subtitleElement.style.fontSize = `${baseSize * 1.3}px`;
            }
            
            // Body text - 1x base size
            document.body.style.fontFamily = fontStack;
            document.body.style.fontSize = `${baseSize}px`;
            
            // Category names - 1.5x base size
            document.querySelectorAll('.category-name').forEach(el => {
                el.style.fontFamily = fontStack;
                el.style.fontSize = `${baseSize * 1.5}px`;
            });
            
            // Challenge text - 2x base size
            document.querySelectorAll('.challenge-text').forEach(el => {
                el.style.fontFamily = fontStack;
                el.style.fontSize = `${baseSize * 2}px`;
            });
            
            // Button text - 1.1x base size
            document.querySelectorAll('.btn').forEach(el => {
                el.style.fontFamily = fontStack;
                el.style.fontSize = `${baseSize * 1.1}px`;
            });
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig: defaultConfig,
                onConfigChange: onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.surface_color || defaultConfig.surface_color,
                            set: (value) => {
                                config.surface_color = value;
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        },
                        {
                            get: () => config.primary_action_color || defaultConfig.primary_action_color,
                            set: (value) => {
                                config.primary_action_color = value;
                                window.elementSdk.setConfig({ primary_action_color: value });
                            }
                        },
                        {
                            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                            set: (value) => {
                                config.secondary_action_color = value;
                                window.elementSdk.setConfig({ secondary_action_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || defaultConfig.font_family,
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: {
                        get: () => config.font_size || defaultConfig.font_size,
                        set: (value) => {
                            config.font_size = value;
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["app_title", config.app_title || defaultConfig.app_title],
                    ["app_subtitle", config.app_subtitle || defaultConfig.app_subtitle]
                ])
            });
        }

        // Inicjalizacja
        updateStats('info');
        updateLanguage();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99a7f40f43c53954',t:'MTc2MjQ2NzM2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
